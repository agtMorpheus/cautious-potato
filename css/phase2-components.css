/**
 * Phase 2 Components Integration
 * 
 * Imports all Phase 2 components (Cards & Panels, Modals, Tables, Status Indicators)
 * for easy inclusion in projects. This file provides a single import for all
 * Phase 2 functionality.
 */

/* Foundation (Required) */
@import url('./variables.css');

/* Phase 1 Components (Dependencies) */
@import url('./buttons.css');
@import url('./forms.css');
@import url('./alerts.css');

/* Phase 2 Components */
@import url('./cards.css');
@import url('./modals.css');
@import url('./tables.css');
@import url('./status.css');

/* ==================== PHASE 2 INTEGRATION UTILITIES ==================== */

/* Component combination classes for common patterns */
.card-with-table {
    /* Card containing a table */
}

.card-with-table .table__wrapper {
    border: none;
    border-radius: 0;
    margin: calc(-1 * var(--space-16));
    margin-top: 0;
}

.card-with-table .card__body {
    padding: 0;
}

.modal-with-table {
    /* Modal containing a table */
}

.modal-with-table .modal__content {
    max-width: 90vw;
    width: 1000px;
}

.modal-with-table .table__wrapper {
    border: none;
    max-height: 400px;
    overflow-y: auto;
}

/* Status integration with cards */
.card--status-pending {
    border-left: 4px solid var(--color-warning);
}

.card--status-pending .card__header {
    background: rgba(168, 75, 47, 0.05);
}

.card--status-processing {
    border-left: 4px solid var(--color-primary);
}

.card--status-processing .card__header {
    background: rgba(33, 128, 141, 0.05);
}

/* Panel with progress */
.panel-with-progress .panel__body {
    padding-bottom: 0;
}

.panel-with-progress .progress-group {
    margin-top: var(--space-16);
    padding: var(--space-16);
    background: var(--color-secondary);
    border-radius: var(--radius-std-base);
}

/* Table with status indicators */
.table--with-status .table__td--status {
    min-width: 120px;
}

/* Modal with steps */
.modal-with-steps .steps {
    margin: 0 0 var(--space-20) 0;
    padding: 0 var(--space-20);
    border-bottom: 1px solid var(--color-border-std);
    padding-bottom: var(--space-16);
}

/* ==================== RESPONSIVE INTEGRATION ==================== */

@media (max-width: 640px) {
    .modal-with-table .modal__content {
        max-width: 95vw;
        width: auto;
    }
    
    .card-with-table .table__wrapper {
        margin: calc(-1 * var(--space-12));
        margin-top: 0;
    }
    
    .panel-with-progress .progress-group {
        margin: var(--space-12) calc(-1 * var(--space-16)) 0;
        border-radius: 0;
    }
}

/* ==================== ACCESSIBILITY INTEGRATION ==================== */

/* Ensure proper focus management between components */
.modal.is-open .card:focus-within {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
}

.card--interactive[role="button"] {
    cursor: pointer;
}

.card--interactive[role="button"]:focus {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
}

/* ==================== ANIMATION COORDINATION ==================== */

/* Stagger animations when multiple components appear together */
.card-grid .card {
    animation: fadeInUp var(--duration-normal) var(--ease-out);
    animation-fill-mode: both;
}

.card-grid .card:nth-child(1) { animation-delay: 0ms; }
.card-grid .card:nth-child(2) { animation-delay: 100ms; }
.card-grid .card:nth-child(3) { animation-delay: 200ms; }
.card-grid .card:nth-child(4) { animation-delay: 300ms; }

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Disable staggered animations on reduced motion */
@media (prefers-reduced-motion: reduce) {
    .card-grid .card {
        animation: none;
    }
}

/* ==================== DARK MODE COORDINATION ==================== */

[data-color-scheme="dark"] .card-with-table .table__wrapper,
[data-theme="dark"] .card-with-table .table__wrapper {
    background: var(--color-surface);
}

[data-color-scheme="dark"] .panel-with-progress .progress-group,
[data-theme="dark"] .panel-with-progress .progress-group {
    background: rgba(255, 255, 255, 0.05);
}

/* ==================== COMPONENT STATE COORDINATION ==================== */

/* Loading states that affect multiple components */
.loading-container {
    position: relative;
}

.loading-container.is-loading {
    pointer-events: none;
}

.loading-container.is-loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    border-radius: inherit;
}

.loading-container.is-loading .loading-spinner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 11;
}

[data-color-scheme="dark"] .loading-container.is-loading::after,
[data-theme="dark"] .loading-container.is-loading::after {
    background: rgba(0, 0, 0, 0.8);
}

/* ==================== PRINT STYLES ==================== */

@media print {
    .modal,
    .drawer,
    .popover {
        display: none !important;
    }
    
    .card {
        break-inside: avoid;
        box-shadow: none;
        border: 1px solid #000;
    }
    
    .table {
        font-size: 12px;
    }
    
    .status-dot,
    .loading-spinner {
        display: none;
    }
    
    .badge {
        border: 1px solid #000;
        background: transparent !important;
        color: #000 !important;
    }
}